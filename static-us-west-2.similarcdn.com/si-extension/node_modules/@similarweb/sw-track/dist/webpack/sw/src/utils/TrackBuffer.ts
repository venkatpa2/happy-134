/**
 * Buffer for Tracking functionality.
 * Useful for throttling, and testing.
 */
export class TrackBuffer {
  private shouldBuffer: () => boolean;

  private rawBuffer = [];

  constructor(shouldBuffer: () => boolean) {
    this.shouldBuffer = shouldBuffer;
  }

  public add(item): void {
    if (this.shouldBuffer()) {
      this.rawBuffer.push(item);
    }
  }

  public flush(): Array<any> {
    const tmp = this.rawBuffer;
    this.rawBuffer = [];
    return tmp;
  }
}
